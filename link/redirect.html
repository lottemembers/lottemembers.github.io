<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>redirection</title>
  <script>
    const paths = {
      'purchases-list': {
        'desktop': 'https://www.lpoint.com/app/mypage/LHMA200100.do',
        'mobile': 'https://mobile.lpoint.com/app/common/AMZZ300100.do?type=myl&reUrl=/app/lpay/LWLM200100.do',
      }
    }
    window.addEventListener('DOMContentLoaded',()=>{
      const param = ( location.href.search('&') != -1 ) ? location.href.split('?paths=')[1].split('&')[0] : location.href.split('?paths=')[1];
      const ua = navigator.userAgent.toLowerCase();
      const deviceType = (ua.search(/(mobile)|(inapp)|(ltappweb)/g) != -1) ? 'mobile' : 'desktop';
      alert(deviceType);
      for(const key in paths){
        if( key != param ){
          alert('올바른 접근이 아닙니다');
          location.href='https://m.lpoint.com';
          return false;
        }
      }
      if( deviceType == 'mobile' ){ 
        location.href = paths[param].mobile;
      }
      if( deviceType == 'desktop' ){ 
        location.href = paths[param].desktop;
      }
    });
  </script>
</head>
<body></body>
</html>
